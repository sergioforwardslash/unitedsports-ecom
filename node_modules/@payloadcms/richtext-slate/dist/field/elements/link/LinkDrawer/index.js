"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "LinkDrawer", {
    enumerable: true,
    get: function() {
        return LinkDrawer;
    }
});
const _elements = require("payload/components/elements");
const _forms = require("payload/components/forms");
const _hooks = require("payload/components/hooks");
const _utilities = require("payload/components/utilities");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
require("./index.scss");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {};
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'rich-text-link-edit-modal';
const LinkDrawer = ({ drawerSlug, fieldSchema, handleModalSubmit, initialState })=>{
    const { t } = (0, _reacti18next.useTranslation)('fields');
    return /*#__PURE__*/ _react.default.createElement(_elements.Drawer, {
        className: baseClass,
        slug: drawerSlug,
        title: t('editLink')
    }, /*#__PURE__*/ _react.default.createElement(_forms.Form, {
        fields: fieldSchema,
        initialState: initialState,
        onSubmit: handleModalSubmit
    }, /*#__PURE__*/ _react.default.createElement(_forms.RenderFields, {
        fieldSchema: fieldSchema,
        fieldTypes: _forms.fieldTypes,
        forceRender: true,
        readOnly: false
    }), /*#__PURE__*/ _react.default.createElement(LinkSubmit, null)));
};
const LinkSubmit = ()=>{
    const { t } = (0, _reacti18next.useTranslation)('fields');
    const ref = (0, _react.useRef)(null);
    const editDepth = (0, _utilities.useEditDepth)();
    (0, _hooks.useHotkey)({
        cmdCtrlKey: true,
        editDepth,
        keyCodes: [
            's'
        ]
    }, (e)=>{
        e.preventDefault();
        e.stopPropagation();
        if (ref?.current) {
            ref.current.click();
        }
    });
    return /*#__PURE__*/ _react.default.createElement(_forms.FormSubmit, {
        ref: ref
    }, t('general:submit'));
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9maWVsZC9lbGVtZW50cy9saW5rL0xpbmtEcmF3ZXIvaW5kZXgudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERyYXdlciB9IGZyb20gJ3BheWxvYWQvY29tcG9uZW50cy9lbGVtZW50cydcbmltcG9ydCB7IEZvcm0sIEZvcm1TdWJtaXQsIFJlbmRlckZpZWxkcyB9IGZyb20gJ3BheWxvYWQvY29tcG9uZW50cy9mb3JtcydcbmltcG9ydCB7IGZpZWxkVHlwZXMgfSBmcm9tICdwYXlsb2FkL2NvbXBvbmVudHMvZm9ybXMnXG5pbXBvcnQgeyB1c2VIb3RrZXkgfSBmcm9tICdwYXlsb2FkL2NvbXBvbmVudHMvaG9va3MnXG5pbXBvcnQgeyB1c2VFZGl0RGVwdGggfSBmcm9tICdwYXlsb2FkL2NvbXBvbmVudHMvdXRpbGl0aWVzJ1xuaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG5pbXBvcnQgdHlwZSB7IFByb3BzIH0gZnJvbSAnLi90eXBlcydcblxuaW1wb3J0ICcuL2luZGV4LnNjc3MnXG5cbmNvbnN0IGJhc2VDbGFzcyA9ICdyaWNoLXRleHQtbGluay1lZGl0LW1vZGFsJ1xuXG5leHBvcnQgY29uc3QgTGlua0RyYXdlcjogUmVhY3QuRkM8UHJvcHM+ID0gKHtcbiAgZHJhd2VyU2x1ZyxcbiAgZmllbGRTY2hlbWEsXG4gIGhhbmRsZU1vZGFsU3VibWl0LFxuICBpbml0aWFsU3RhdGUsXG59KSA9PiB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oJ2ZpZWxkcycpXG5cbiAgcmV0dXJuIChcbiAgICA8RHJhd2VyIGNsYXNzTmFtZT17YmFzZUNsYXNzfSBzbHVnPXtkcmF3ZXJTbHVnfSB0aXRsZT17dCgnZWRpdExpbmsnKX0+XG4gICAgICA8Rm9ybSBmaWVsZHM9e2ZpZWxkU2NoZW1hfSBpbml0aWFsU3RhdGU9e2luaXRpYWxTdGF0ZX0gb25TdWJtaXQ9e2hhbmRsZU1vZGFsU3VibWl0fT5cbiAgICAgICAgPFJlbmRlckZpZWxkc1xuICAgICAgICAgIGZpZWxkU2NoZW1hPXtmaWVsZFNjaGVtYX1cbiAgICAgICAgICBmaWVsZFR5cGVzPXtmaWVsZFR5cGVzfVxuICAgICAgICAgIGZvcmNlUmVuZGVyXG4gICAgICAgICAgcmVhZE9ubHk9e2ZhbHNlfVxuICAgICAgICAvPlxuICAgICAgICA8TGlua1N1Ym1pdCAvPlxuICAgICAgPC9Gb3JtPlxuICAgIDwvRHJhd2VyPlxuICApXG59XG5cbmNvbnN0IExpbmtTdWJtaXQ6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKCdmaWVsZHMnKVxuICBjb25zdCByZWYgPSB1c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGVkaXREZXB0aCA9IHVzZUVkaXREZXB0aCgpXG5cbiAgdXNlSG90a2V5KHsgY21kQ3RybEtleTogdHJ1ZSwgZWRpdERlcHRoLCBrZXlDb2RlczogWydzJ10gfSwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgaWYgKHJlZj8uY3VycmVudCkge1xuICAgICAgcmVmLmN1cnJlbnQuY2xpY2soKVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gPEZvcm1TdWJtaXQgcmVmPXtyZWZ9Pnt0KCdnZW5lcmFsOnN1Ym1pdCcpfTwvRm9ybVN1Ym1pdD5cbn1cbiJdLCJuYW1lcyI6WyJMaW5rRHJhd2VyIiwiYmFzZUNsYXNzIiwiZHJhd2VyU2x1ZyIsImZpZWxkU2NoZW1hIiwiaGFuZGxlTW9kYWxTdWJtaXQiLCJpbml0aWFsU3RhdGUiLCJ0IiwidXNlVHJhbnNsYXRpb24iLCJEcmF3ZXIiLCJjbGFzc05hbWUiLCJzbHVnIiwidGl0bGUiLCJGb3JtIiwiZmllbGRzIiwib25TdWJtaXQiLCJSZW5kZXJGaWVsZHMiLCJmaWVsZFR5cGVzIiwiZm9yY2VSZW5kZXIiLCJyZWFkT25seSIsIkxpbmtTdWJtaXQiLCJyZWYiLCJ1c2VSZWYiLCJlZGl0RGVwdGgiLCJ1c2VFZGl0RGVwdGgiLCJ1c2VIb3RrZXkiLCJjbWRDdHJsS2V5Iiwia2V5Q29kZXMiLCJlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjdXJyZW50IiwiY2xpY2siLCJGb3JtU3VibWl0Il0sIm1hcHBpbmdzIjoiOzs7OytCQWNhQTs7O2VBQUFBOzs7MEJBZFU7dUJBQ3dCO3VCQUVyQjsyQkFDRzsrREFDQzs4QkFDQztRQUl4Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVQLE1BQU1DLFlBQVk7QUFFWCxNQUFNRCxhQUE4QixDQUFDLEVBQzFDRSxVQUFVLEVBQ1ZDLFdBQVcsRUFDWEMsaUJBQWlCLEVBQ2pCQyxZQUFZLEVBQ2I7SUFDQyxNQUFNLEVBQUVDLENBQUMsRUFBRSxHQUFHQyxJQUFBQSw0QkFBYyxFQUFDO0lBRTdCLHFCQUNFLDZCQUFDQyxnQkFBTTtRQUFDQyxXQUFXUjtRQUFXUyxNQUFNUjtRQUFZUyxPQUFPTCxFQUFFO3FCQUN2RCw2QkFBQ00sV0FBSTtRQUFDQyxRQUFRVjtRQUFhRSxjQUFjQTtRQUFjUyxVQUFVVjtxQkFDL0QsNkJBQUNXLG1CQUFZO1FBQ1haLGFBQWFBO1FBQ2JhLFlBQVlBLGlCQUFVO1FBQ3RCQyxhQUFBQTtRQUNBQyxVQUFVO3NCQUVaLDZCQUFDQztBQUlUO0FBRUEsTUFBTUEsYUFBdUI7SUFDM0IsTUFBTSxFQUFFYixDQUFDLEVBQUUsR0FBR0MsSUFBQUEsNEJBQWMsRUFBQztJQUM3QixNQUFNYSxNQUFNQyxJQUFBQSxhQUFNLEVBQW9CO0lBQ3RDLE1BQU1DLFlBQVlDLElBQUFBLHVCQUFZO0lBRTlCQyxJQUFBQSxnQkFBUyxFQUFDO1FBQUVDLFlBQVk7UUFBTUg7UUFBV0ksVUFBVTtZQUFDO1NBQUk7SUFBQyxHQUFHLENBQUNDO1FBQzNEQSxFQUFFQyxjQUFjO1FBQ2hCRCxFQUFFRSxlQUFlO1FBQ2pCLElBQUlULEtBQUtVLFNBQVM7WUFDaEJWLElBQUlVLE9BQU8sQ0FBQ0MsS0FBSztRQUNuQjtJQUNGO0lBRUEscUJBQU8sNkJBQUNDLGlCQUFVO1FBQUNaLEtBQUtBO09BQU1kLEVBQUU7QUFDbEMifQ==