"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _formatBreadcrumb = /*#__PURE__*/ _interop_require_default(require("./formatBreadcrumb"));
const _getParents = /*#__PURE__*/ _interop_require_default(require("./getParents"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const populateBreadcrumbs = async (req, pluginConfig, collection, data, originalDoc)=>{
    const newData = data;
    const breadcrumbDocs = [
        ...await (0, _getParents.default)(req, pluginConfig, collection, {
            ...originalDoc,
            ...data
        })
    ];
    const currentDocBreadcrumb = {
        ...originalDoc,
        ...data
    };
    if (originalDoc?.id) {
        currentDocBreadcrumb.id = originalDoc?.id;
    }
    breadcrumbDocs.push(currentDocBreadcrumb);
    const breadcrumbs = breadcrumbDocs.map((_, i)=>(0, _formatBreadcrumb.default)(pluginConfig, collection, breadcrumbDocs.slice(0, i + 1))) // eslint-disable-line function-paren-newline
    ;
    return {
        ...newData,
        [pluginConfig?.breadcrumbsFieldSlug || 'breadcrumbs']: breadcrumbs
    };
};
const _default = populateBreadcrumbs;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcG9wdWxhdGVCcmVhZGNydW1icy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkL3R5cGVzJ1xuXG5pbXBvcnQgdHlwZSB7IFBsdWdpbkNvbmZpZyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5pbXBvcnQgZm9ybWF0QnJlYWRjcnVtYiBmcm9tICcuL2Zvcm1hdEJyZWFkY3J1bWInXG5pbXBvcnQgZ2V0UGFyZW50cyBmcm9tICcuL2dldFBhcmVudHMnXG5cbmNvbnN0IHBvcHVsYXRlQnJlYWRjcnVtYnMgPSBhc3luYyAoXG4gIHJlcTogYW55LFxuICBwbHVnaW5Db25maWc6IFBsdWdpbkNvbmZpZyxcbiAgY29sbGVjdGlvbjogQ29sbGVjdGlvbkNvbmZpZyxcbiAgZGF0YTogYW55LFxuICBvcmlnaW5hbERvYz86IGFueSxcbik6IFByb21pc2U8YW55PiA9PiB7XG4gIGNvbnN0IG5ld0RhdGEgPSBkYXRhXG4gIGNvbnN0IGJyZWFkY3J1bWJEb2NzID0gW1xuICAgIC4uLihhd2FpdCBnZXRQYXJlbnRzKHJlcSwgcGx1Z2luQ29uZmlnLCBjb2xsZWN0aW9uLCB7XG4gICAgICAuLi5vcmlnaW5hbERvYyxcbiAgICAgIC4uLmRhdGEsXG4gICAgfSkpLFxuICBdXG5cbiAgY29uc3QgY3VycmVudERvY0JyZWFkY3J1bWIgPSB7XG4gICAgLi4ub3JpZ2luYWxEb2MsXG4gICAgLi4uZGF0YSxcbiAgfVxuXG4gIGlmIChvcmlnaW5hbERvYz8uaWQpIHtcbiAgICBjdXJyZW50RG9jQnJlYWRjcnVtYi5pZCA9IG9yaWdpbmFsRG9jPy5pZFxuICB9XG5cbiAgYnJlYWRjcnVtYkRvY3MucHVzaChjdXJyZW50RG9jQnJlYWRjcnVtYilcblxuICBjb25zdCBicmVhZGNydW1icyA9IGJyZWFkY3J1bWJEb2NzLm1hcCgoXywgaSkgPT5cbiAgICBmb3JtYXRCcmVhZGNydW1iKHBsdWdpbkNvbmZpZywgY29sbGVjdGlvbiwgYnJlYWRjcnVtYkRvY3Muc2xpY2UoMCwgaSArIDEpKSxcbiAgKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uLXBhcmVuLW5ld2xpbmVcblxuICByZXR1cm4ge1xuICAgIC4uLm5ld0RhdGEsXG4gICAgW3BsdWdpbkNvbmZpZz8uYnJlYWRjcnVtYnNGaWVsZFNsdWcgfHwgJ2JyZWFkY3J1bWJzJ106IGJyZWFkY3J1bWJzLFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBvcHVsYXRlQnJlYWRjcnVtYnNcbiJdLCJuYW1lcyI6WyJwb3B1bGF0ZUJyZWFkY3J1bWJzIiwicmVxIiwicGx1Z2luQ29uZmlnIiwiY29sbGVjdGlvbiIsImRhdGEiLCJvcmlnaW5hbERvYyIsIm5ld0RhdGEiLCJicmVhZGNydW1iRG9jcyIsImdldFBhcmVudHMiLCJjdXJyZW50RG9jQnJlYWRjcnVtYiIsImlkIiwicHVzaCIsImJyZWFkY3J1bWJzIiwibWFwIiwiXyIsImkiLCJmb3JtYXRCcmVhZGNydW1iIiwic2xpY2UiLCJicmVhZGNydW1ic0ZpZWxkU2x1ZyJdLCJtYXBwaW5ncyI6Ijs7OzsrQkEyQ0E7OztlQUFBOzs7eUVBdkM2QjttRUFDTjs7Ozs7O0FBRXZCLE1BQU1BLHNCQUFzQixPQUMxQkMsS0FDQUMsY0FDQUMsWUFDQUMsTUFDQUM7SUFFQSxNQUFNQyxVQUFVRjtJQUNoQixNQUFNRyxpQkFBaUI7V0FDakIsTUFBTUMsSUFBQUEsbUJBQVUsRUFBQ1AsS0FBS0MsY0FBY0MsWUFBWTtZQUNsRCxHQUFHRSxXQUFXO1lBQ2QsR0FBR0QsSUFBSTtRQUNUO0tBQ0Q7SUFFRCxNQUFNSyx1QkFBdUI7UUFDM0IsR0FBR0osV0FBVztRQUNkLEdBQUdELElBQUk7SUFDVDtJQUVBLElBQUlDLGFBQWFLLElBQUk7UUFDbkJELHFCQUFxQkMsRUFBRSxHQUFHTCxhQUFhSztJQUN6QztJQUVBSCxlQUFlSSxJQUFJLENBQUNGO0lBRXBCLE1BQU1HLGNBQWNMLGVBQWVNLEdBQUcsQ0FBQyxDQUFDQyxHQUFHQyxJQUN6Q0MsSUFBQUEseUJBQWdCLEVBQUNkLGNBQWNDLFlBQVlJLGVBQWVVLEtBQUssQ0FBQyxHQUFHRixJQUFJLEtBQ3ZFLDZDQUE2Qzs7SUFFL0MsT0FBTztRQUNMLEdBQUdULE9BQU87UUFDVixDQUFDSixjQUFjZ0Isd0JBQXdCLGNBQWMsRUFBRU47SUFDekQ7QUFDRjtNQUVBLFdBQWVaIn0=