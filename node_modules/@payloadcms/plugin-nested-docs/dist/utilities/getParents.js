"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const getParents = async (req, pluginConfig, collection, doc, docs = [])=>{
    const parent = doc[pluginConfig?.parentFieldSlug || 'parent'];
    let retrievedParent;
    if (parent) {
        // If not auto-populated, and we have an ID
        if (typeof parent === 'string' || typeof parent === 'number') {
            retrievedParent = await req.payload.findByID({
                req,
                id: parent,
                collection: collection.slug,
                depth: 0,
                disableErrors: true
            });
        }
        // If auto-populated
        if (typeof parent === 'object') {
            retrievedParent = parent;
        }
        if (retrievedParent) {
            if (retrievedParent.parent) {
                return getParents(req, pluginConfig, collection, retrievedParent, [
                    retrievedParent,
                    ...docs
                ]);
            }
            return [
                retrievedParent,
                ...docs
            ];
        }
    }
    return docs;
};
const _default = getParents;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvZ2V0UGFyZW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbGxlY3Rpb25Db25maWcgfSBmcm9tICdwYXlsb2FkL3R5cGVzJ1xuXG5pbXBvcnQgdHlwZSB7IFBsdWdpbkNvbmZpZyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5jb25zdCBnZXRQYXJlbnRzID0gYXN5bmMgKFxuICByZXE6IGFueSxcbiAgcGx1Z2luQ29uZmlnOiBQbHVnaW5Db25maWcsXG4gIGNvbGxlY3Rpb246IENvbGxlY3Rpb25Db25maWcsXG4gIGRvYzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGRvY3M6IEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+PiA9IFtdLFxuKTogUHJvbWlzZTxBcnJheTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4+ID0+IHtcbiAgY29uc3QgcGFyZW50ID0gZG9jW3BsdWdpbkNvbmZpZz8ucGFyZW50RmllbGRTbHVnIHx8ICdwYXJlbnQnXVxuICBsZXQgcmV0cmlldmVkUGFyZW50XG5cbiAgaWYgKHBhcmVudCkge1xuICAgIC8vIElmIG5vdCBhdXRvLXBvcHVsYXRlZCwgYW5kIHdlIGhhdmUgYW4gSURcbiAgICBpZiAodHlwZW9mIHBhcmVudCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHBhcmVudCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHJpZXZlZFBhcmVudCA9IGF3YWl0IHJlcS5wYXlsb2FkLmZpbmRCeUlEKHtcbiAgICAgICAgcmVxLFxuICAgICAgICBpZDogcGFyZW50LFxuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLnNsdWcsXG4gICAgICAgIGRlcHRoOiAwLFxuICAgICAgICBkaXNhYmxlRXJyb3JzOiB0cnVlLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBJZiBhdXRvLXBvcHVsYXRlZFxuICAgIGlmICh0eXBlb2YgcGFyZW50ID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0cmlldmVkUGFyZW50ID0gcGFyZW50XG4gICAgfVxuXG4gICAgaWYgKHJldHJpZXZlZFBhcmVudCkge1xuICAgICAgaWYgKHJldHJpZXZlZFBhcmVudC5wYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIGdldFBhcmVudHMocmVxLCBwbHVnaW5Db25maWcsIGNvbGxlY3Rpb24sIHJldHJpZXZlZFBhcmVudCwgW1xuICAgICAgICAgIHJldHJpZXZlZFBhcmVudCxcbiAgICAgICAgICAuLi5kb2NzLFxuICAgICAgICBdKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3JldHJpZXZlZFBhcmVudCwgLi4uZG9jc11cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZG9jc1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRQYXJlbnRzXG4iXSwibmFtZXMiOlsiZ2V0UGFyZW50cyIsInJlcSIsInBsdWdpbkNvbmZpZyIsImNvbGxlY3Rpb24iLCJkb2MiLCJkb2NzIiwicGFyZW50IiwicGFyZW50RmllbGRTbHVnIiwicmV0cmlldmVkUGFyZW50IiwicGF5bG9hZCIsImZpbmRCeUlEIiwiaWQiLCJzbHVnIiwiZGVwdGgiLCJkaXNhYmxlRXJyb3JzIl0sIm1hcHBpbmdzIjoiOzs7OytCQThDQTs7O2VBQUE7OztBQTFDQSxNQUFNQSxhQUFhLE9BQ2pCQyxLQUNBQyxjQUNBQyxZQUNBQyxLQUNBQyxPQUF1QyxFQUFFO0lBRXpDLE1BQU1DLFNBQVNGLEdBQUcsQ0FBQ0YsY0FBY0ssbUJBQW1CLFNBQVM7SUFDN0QsSUFBSUM7SUFFSixJQUFJRixRQUFRO1FBQ1YsMkNBQTJDO1FBQzNDLElBQUksT0FBT0EsV0FBVyxZQUFZLE9BQU9BLFdBQVcsVUFBVTtZQUM1REUsa0JBQWtCLE1BQU1QLElBQUlRLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDO2dCQUMzQ1Q7Z0JBQ0FVLElBQUlMO2dCQUNKSCxZQUFZQSxXQUFXUyxJQUFJO2dCQUMzQkMsT0FBTztnQkFDUEMsZUFBZTtZQUNqQjtRQUNGO1FBRUEsb0JBQW9CO1FBQ3BCLElBQUksT0FBT1IsV0FBVyxVQUFVO1lBQzlCRSxrQkFBa0JGO1FBQ3BCO1FBRUEsSUFBSUUsaUJBQWlCO1lBQ25CLElBQUlBLGdCQUFnQkYsTUFBTSxFQUFFO2dCQUMxQixPQUFPTixXQUFXQyxLQUFLQyxjQUFjQyxZQUFZSyxpQkFBaUI7b0JBQ2hFQTt1QkFDR0g7aUJBQ0o7WUFDSDtZQUVBLE9BQU87Z0JBQUNHO21CQUFvQkg7YUFBSztRQUNuQztJQUNGO0lBRUEsT0FBT0E7QUFDVDtNQUVBLFdBQWVMIn0=